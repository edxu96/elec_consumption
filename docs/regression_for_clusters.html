---

title: Title


keywords: fastai
sidebar: home_sidebar



nb_path: "02_regression_for_clusters.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 02_regression_for_clusters.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="kn">import</span> <span class="nn">statsmodels.formula.api</span> <span class="k">as</span> <span class="nn">smf</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get_rdataset</span><span class="p">(</span><span class="s1">&#39;epil&#39;</span><span class="p">,</span> <span class="n">package</span><span class="o">=</span><span class="s1">&#39;MASS&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>y</th>
      <th>trt</th>
      <th>base</th>
      <th>age</th>
      <th>V4</th>
      <th>subject</th>
      <th>period</th>
      <th>lbase</th>
      <th>lage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>5</td>
      <td>placebo</td>
      <td>11</td>
      <td>31</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>-0.756354</td>
      <td>0.114204</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3</td>
      <td>placebo</td>
      <td>11</td>
      <td>31</td>
      <td>0</td>
      <td>1</td>
      <td>2</td>
      <td>-0.756354</td>
      <td>0.114204</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>placebo</td>
      <td>11</td>
      <td>31</td>
      <td>0</td>
      <td>1</td>
      <td>3</td>
      <td>-0.756354</td>
      <td>0.114204</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>placebo</td>
      <td>11</td>
      <td>31</td>
      <td>1</td>
      <td>1</td>
      <td>4</td>
      <td>-0.756354</td>
      <td>0.114204</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3</td>
      <td>placebo</td>
      <td>11</td>
      <td>30</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>-0.756354</td>
      <td>0.081414</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>231</th>
      <td>0</td>
      <td>progabide</td>
      <td>13</td>
      <td>36</td>
      <td>1</td>
      <td>58</td>
      <td>4</td>
      <td>-0.589300</td>
      <td>0.263735</td>
    </tr>
    <tr>
      <th>232</th>
      <td>1</td>
      <td>progabide</td>
      <td>12</td>
      <td>37</td>
      <td>0</td>
      <td>59</td>
      <td>1</td>
      <td>-0.669342</td>
      <td>0.291134</td>
    </tr>
    <tr>
      <th>233</th>
      <td>4</td>
      <td>progabide</td>
      <td>12</td>
      <td>37</td>
      <td>0</td>
      <td>59</td>
      <td>2</td>
      <td>-0.669342</td>
      <td>0.291134</td>
    </tr>
    <tr>
      <th>234</th>
      <td>3</td>
      <td>progabide</td>
      <td>12</td>
      <td>37</td>
      <td>0</td>
      <td>59</td>
      <td>3</td>
      <td>-0.669342</td>
      <td>0.291134</td>
    </tr>
    <tr>
      <th>235</th>
      <td>2</td>
      <td>progabide</td>
      <td>12</td>
      <td>37</td>
      <td>1</td>
      <td>59</td>
      <td>4</td>
      <td>-0.669342</td>
      <td>0.291134</td>
    </tr>
  </tbody>
</table>
<p>236 rows Ã— 9 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fam</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">families</span><span class="o">.</span><span class="n">Poisson</span><span class="p">()</span>
<span class="n">ind</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">cov_struct</span><span class="o">.</span><span class="n">Exchangeable</span><span class="p">()</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">gee</span><span class="p">(</span><span class="s2">&quot;y ~ age + trt + base&quot;</span><span class="p">,</span> <span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span>
                <span class="n">cov_struct</span><span class="o">=</span><span class="n">ind</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="n">fam</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">smf</span><span class="o">.</span><span class="n">gee</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Help on method from_formula in module statsmodels.genmod.generalized_estimating_equations:

from_formula(formula, groups, data, subset=None, time=None, offset=None, exposure=None, *args, **kwargs) method of builtins.type instance
    Create a Model from a formula and dataframe.
    
    Parameters
    ----------
    formula : str or generic Formula object
        The formula specifying the model.
    data : array_like
        The data for the model. See Notes.
    subset : array_like
        An array-like object of booleans, integers, or index values that
        indicate the subset of df to use in the model. Assumes df is a
        `pandas.DataFrame`.
    drop_cols : array_like
        Columns to drop from the design matrix.  Cannot be used to
        drop terms involving categoricals.
    *args
        Additional positional argument that are passed to the model.
    **kwargs
        These are passed to the model with one exception. The
        ``eval_env`` keyword is passed to patsy. It can be either a
        :class:`patsy:patsy.EvalEnvironment` object or an integer
        indicating the depth of the namespace to use. For example, the
        default ``eval_env=0`` uses the calling namespace. If you wish
        to use a &#34;clean&#34; environment set ``eval_env=-1``.
    
    Returns
    -------
    model
        The model instance.
    
    Notes
    -----
    data must define __getitem__ with the keys in the formula terms
    args and kwargs are passed on to the model instantiation. E.g.,
    a numpy structured or rec array, a dictionary, or a pandas DataFrame.

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

